<!doctype html>
<html>
<head>

    <title>Givahoy</title>


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./themes/jquery.mobile-1.4.5.css">
    <link rel="stylesheet" href="./themes/jquery.mobile.icons.min.css"/>
    <link rel="stylesheet" href="./themes/main.css"/>

</head>
<body ng-controller="givahoyAppController">

    <div class="modal ui-overlay-shadow display registration">

        <div class="exitButton"></div>
        <div class="container">
            <div class="loadingContent">
                <img id="theImg" src="themes/ring.gif" /><br>
                <span>Initialising Application, please wait</span>
            </div>

            <div class="registrationContent">
                <h4>Please enter your email address to initiate the registration</h4>
                <br>
                <br>
                <input type="email">
                <br>
                <br>
                <button id="registrationsubmit">Register</button>
            </div>
        </div>
    </div>
<div class="modal-underlay"></div>

<script type="text/javascript" src="lib/angular.min.js"></script>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="libs/evothings/evothings.js"></script>
<script type="text/javascript" src="libs/evothings/ui/ui.js"></script>
<script type="text/javascript" src="lib/jquery.min.js"></script>
<script type="text/javascript" src="lib/axios/dist/axios.standalone.js"></script>
<script type="text/javascript" src="lib/CryptoJS/rollups/hmac-sha256.js"></script>
<script type="text/javascript" src="lib/CryptoJS/rollups/sha256.js"></script>
<script type="text/javascript" src="lib/CryptoJS/components/hmac.js"></script>
<script type="text/javascript" src="lib/CryptoJS/components/enc-base64.js"></script>
<script type="text/javascript" src="lib/moment/moment.js"></script>
<script type="text/javascript" src="lib/url-template/url-template.js"></script>
<script type="text/javascript" src="lib/apiGatewayCore/sigV4Client.js"></script>
<script type="text/javascript" src="lib/apiGatewayCore/apiGatewayClient.js"></script>
<script type="text/javascript" src="lib/apiGatewayCore/simpleHttpClient.js"></script>
<script type="text/javascript" src="lib/apiGatewayCore/utils.js"></script>
<script type="text/javascript" src="apigClient.js"></script>
<script type="text/javascript" src="src/models.js"></script>
<script type="text/javascript" src="src/app.js"></script>

<script>
    $(document).bind("mobileinit", function() {
        $.mobile.defaultPageTransition = 'none';
    });

    function getSelectedLocation(){
        selectedLocation =  $('#locations')
                .find($('option:selected'));

        return selectedLocation;
    }

    $(" .modal .exitButton").click(function(){
        clearModal();
    });

    function clearModal(){
        console.log("clearModal called");
        $(".modal")
                .removeClass("display")
                .removeClass("loading")
                .removeClass("registration")
                .removeClass("completedTransaction")
                .removeClass("error")
                .removeClass("dismissible");
    }

    function showLoadingModal(message){
        clearModal();
        $(".modal")
                .addClass("display")
                .addClass("loading")
                .addClass("dismissable");
        $(".modal .loadingContent span")
                .text(message);
    }

    function showRegistrationModal(){
        clearModal();
        $(".modal")
                .addClass("display")
                .addClass("registration")
                .addClass("dismissable");
    }
    function showErrorModal(message, dismissable){
        clearModal();
        $(".modal")
                .addClass("display")
                .addClass("error");

        if(dismissable) {
            $(".modal").addClass("dismissible");
        }
        $(".modal .container")
                .text(message)
                .prepend('<div class="exit"></div><img id="theImg" src="images/warning.png" /><br>');
    }

    function showTransactionCompletedModal(charity, amount){
        clearModal();
        $(".modal")
                .addClass("display")
                .addClass("completedTransaction")
                .addClass("dismissible");
        $(".modal .container")
                .text("Thank you for your $" + amount + " donation to " + charity)
                .prepend('<div class="exit"></div><img id="theImg" src="images/heart.png" /><br>');
    }

    function onDeviceReady() {
        console.info("onDeviceReady Called");
        cordova.plugins.BluetoothStatus.initPlugin();
        angular.bootstrap($('html'), ["givahoyApp"]);

    }

    document.addEventListener("deviceready", onDeviceReady, false);
</script>
<script type="text/javascript" src="./libs/jquery.mobile-1.4.5.js"></script>
</body>
</html>
